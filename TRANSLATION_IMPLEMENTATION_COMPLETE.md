# ๐ ูุธุงู ุงูุชุฑุฌูุฉ ุงููุชุนุฏุฏุฉ - ุงูุชูููุฐ ููุชูู

**ุงูุชุงุฑูุฎ:** 9 ูุจุฑุงูุฑ 2026  
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ูููุดุฑ

---

## ๐ ููุฎุต ุงูููุฒุงุช ุงูููุฌุฒุฉ

### 1. **ุญููู ุงูุชุฑุฌูุฉ ุงููุถุงูุฉ**
ุชู ุฅุถุงูุฉ ุญููู ุชุฑุฌูุฉ ูุชุนุฏุฏุฉ ุงููุบุงุช ููุฌุฏูู ุงูุฑุฆูุณู:

#### `menu_items` ุฌุฏูู
- `name_en`, `name_fr`, `name_de`, `name_ru`, `name_ja` โ ุงุณู ุงูุตูู ุจู 5 ูุบุงุช
- `description_en`, `description_fr`, `description_de`, `description_ru`, `description_ja` โ ูุตู ุงูุตูู ุจู 5 ูุบุงุช
- ุงูุญููู ุงูุฃุตููุฉ: `name` (ุนุฑุจู)ุ `description` (ุนุฑุจู)

#### `menu_addons` ุฌุฏูู
- `name_en`, `name_fr`, `name_de`, `name_ru`, `name_ja` โ ุงุณู ุงูุฅุถุงูุฉ ุจู 5 ูุบุงุช

#### `item_variants` ุฌุฏูู  
- `name_en`, `name_fr`, `name_de`, `name_ru`, `name_ja` โ ุงุณู ุงูุญุฌู/ุงูููุน ุจู 5 ูุบุงุช

---

## ๐ง ุงูุชุนุฏููุงุช ุงููููุฐุฉ

### โ ุงููุงุฌูุฉ ุงูุฎูููุฉ (Backend)

**๐ `app/api/admin/menu-item/route.js`**
- โ ุฅุถุงูุฉ `whitelist` ููุญููู ุงููุณููุญุฉ ูู POST/PUT
- โ ุชูุธูู ุงูุจูุงูุงุช (sanitization) ูุจู ุงูุฅุฏุฑุงุฌ/ุงูุชุญุฏูุซ
- โ ุฏุนู ูุงูู ูุญููู ุงูุชุฑุฌูุฉ:
  - `name_*` (5 ูุบุงุช)
  - `description_*` (5 ูุบุงุช)  
  - `addons[].name_*` (ููู ุฅุถุงูุฉ)
  - `variants[].name_*` ู `variants[].is_default` (ููู ุญุฌู)

### โ ููุญุฉ ุงูุชุญูู (Dashboard)

**๐ `app/dashboard/page.js`**
- โ ุฅุถุงูุฉ 5 ุญููู ุฅุฏุฎุงู ูุฃุณูุงุก ุงูุชุฑุฌูุฉ:
  - `name_en` (English)
  - `name_fr` (Franรงais)
  - `name_de` (Deutsch)
  - `name_ru` (ะัััะบะธะน)
  - `name_ja` (ๆฅๆฌ่ช)
  
- โ ุฅุถุงูุฉ 5 ููุงุทู ูุตูุฉ ูุฃูุตุงู ุงูุชุฑุฌูุฉ (layout ุดุจูุฉ 2 ุนููุฏ)
- โ ุญูุธ ุชููุงุฆู ููุญููู ุนูุฏ ุงูุชุนุฏูู/ุงูุฅุถุงูุฉ/ุงูุฑูุณูุช
- โ ุงูุจูุงูุงุช ูุญููุธุฉ ูู Supabase ููุฑุงู

### โ ุตูุญุฉ ุงููููู ุงูุนุงูุฉ (Public Menu)

**๐ `app/menu/[id]/page.js`**
- โ ุงุฎุชูุงุฑ ุงุณู ูุชุฑุฌู ุญุณุจ ุงููุบุฉ ุงููุฎุชุงุฑุฉ:
  ```javascript
  const name = (language === 'en' && item.name_en) ? item.name_en
    : (language === 'fr' && item.name_fr) ? item.name_fr
    : (language === 'de' && item.name_de) ? item.name_de
    : (language === 'ru' && item.name_ru) ? item.name_ru
    : (language === 'ja' && item.name_ja) ? item.name_ja
    : item.name  // ุงูุนุฑุจูุฉ ุงูุงูุชุฑุงุถูุฉ
  ```
  
- โ ุงูุจุญุซ ุงููุชูุฏู ูู ุฌููุน ุงููุบุงุช:
  - ุงูุจุญุซ ูุบุทู: `name`, `name_en`, `name_fr`, `name_de`, `name_ru`, `name_ja`
  - ุงูุจุญุซ ูุบุทู: `description`, `description_en`, `description_fr`, `description_de`, `description_ru`, `description_ja`
  
- โ ุงูุฃุญุฌุงู ูุงูุฅุถุงูุงุช ุชุนุฑุถ ุฃุณูุงุก ูุชุฑุฌูุฉ (ููู ููุณ ุงูููุฌู)

---

## ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ููู ุงูุชุฑุญูู
**๐ `migrations/001_add_translation_columns.sql`**

ูุญุชูู ุนูู:
1. **ุฅุถุงูุฉ ุงูุฃุนูุฏุฉ:** ุฌููุน ุงูุญููู ุงููุทููุจุฉ ูู 3 ุฌุฏุงูู
2. **ููุก ุงูุจูุงูุงุช ุงููุฏููุฉ (Backfill):** ูุณุฎ ุงูููู ุงูุฃุตููุฉ ุฅูู ุฃุนูุฏุฉ ุงูุชุฑุฌูุฉ ุงูุฌุฏูุฏุฉ (ุจุญูุซ ูุง ุชุธูุฑ ูุงุฑุบุฉ)

### ุณูุฑุจุช ุงูุชุฑุญูู ุงูุชููุงุฆู
**๐ `scripts/run_translation_migration.js`**

```bash
# ุงุณุชุฎุฏุงู:
export DATABASE_URL="postgres://USER:PASS@HOST:PORT/DBNAME"
node scripts/run_translation_migration.js
```

---

## ๐ ุฎุทูุงุช ุงูุชุฑุดูุญ (Deployment)

### ุงููุฑุญูุฉ 1: ุงูุจูุฆุฉ ุงููุญููุฉ (Local)
```bash
# ุชุซุจูุช ุงูุงุนุชูุงุฏูุงุช
npm install

# ุจุฏุก ุงูุฎุงุฏู
npm run dev

# ุงุฎุชุจุงุฑ ูู http://localhost:3000
# Dashboard: http://localhost:3000/dashboard
# Menu: http://localhost:3000/menu/[restaurant_id]
```

### ุงููุฑุญูุฉ 2: Staging (ูุฌูุฏ database ูููุตูุฉ)
```bash
# 1. ุงุญุตู ุนูู DATABASE_URL ูู Supabase Staging
# Dashboard โ Settings โ Database โ Connection โ URI

# 2. ูููุฐ ุงูุชุฑุญูู
export DATABASE_URL="<staging_db_url>"
node scripts/run_translation_migration.js

# 3. ุงุฎุชุจุฑ ุนูู ูููุน staging
# ุชุฃูุฏ: ุงูุญููู ุชุธูุฑุ ุงูุจุญุซ ูุนููุ ุงูุชุฑุฌูุงุช ุชุญูุธ
```

### ุงููุฑุญูุฉ 3: Production (ูุณุฎ ุงุญุชูุงุทูุฉ ุฃููุงู!)
```bash
# ุชุญุฐูุฑ: ุฎุฐ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ุฃููุงู!
# Supabase Dashboard โ Database โ Backups โ Create

# ุจุนุฏ ุงูุชุฃูุฏ ูู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ:
export DATABASE_URL="<production_db_url>"
node scripts/run_translation_migration.js

# ุชุญูู: ุชุณุฌูู ุงูุฏุฎูู โ dashboard โ ุฃุถู ุตูู ุฌุฏูุฏ
# ุชุฃูุฏ: ุงูุญููู ููุฌูุฏุฉ ูุงูุญูุธ ูุนูู
```

---

## โ ูุงุฆูุฉ ุงูุชุญูู ุงููุฏูู (QA Checklist)

### Dashboard (ููุญุฉ ุงูุชุญูู)
- [ ] โ ูุธูุฑ ุงูุญูู `name_en` (English name)
- [ ] โ ูุธูุฑ ุงูุญูู `name_fr` (French name)
- [ ] โ ูุธูุฑ ุงูุญูู `name_de` (German name)
- [ ] โ ูุธูุฑ ุงูุญูู `name_ru` (Russian name)
- [ ] โ ูุธูุฑ ุงูุญูู `name_ja` (Japanese name)
- [ ] โ ูุธูุฑ `description_en`, `description_fr`, `description_de`, `description_ru`, `description_ja`
- [ ] โ ุฅุถุงูุฉ ุตูู ุฌุฏูุฏ ูุน ููุก ุฌููุน ุงูุญููู โ ูุนูููุฉ "ุชู ุฅุถุงูุฉ ุงูุตูู ุจูุฌุงุญ!"
- [ ] โ ุชุนุฏูู ุตูู ููุฌูุฏ โ ุงูุญููู ุชููุฃ ุจุงูุจูุงูุงุช ุงูููุฌูุฏุฉ
- [ ] โ ุญูุธ ุงูุชุนุฏููุงุช โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก

### ุตูุญุฉ ุงููููู (Menu Page)
- [ ] โ ุงุถุบุท ุนูู ุฒุฑ ุงููุบุฉ ูู ุงูุฃุนูู ูููู
- [ ] โ ุงุฎุชุฑ "English" โ ุงูุฃุณูุงุก ูุงูุฃูุตุงู ุชุธูุฑ ุจุงูุฅูุฌููุฒูุฉ
- [ ] โ ุงุฎุชุฑ "Franรงais" โ ุงูุฃุณูุงุก ูุงูุฃูุตุงู ุชุธูุฑ ุจุงููุฑูุณูุฉ
- [ ] โ ุงุฎุชุฑ "Deutsch" โ ุงููุตูุต ุชุธูุฑ ุจุงูุฃููุงููุฉ
- [ ] โ ุงุฎุชุฑ "ะัััะบะธะน" โ ุงููุตูุต ุชุธูุฑ ุจุงูุฑูุณูุฉ
- [ ] โ ุงุฎุชุฑ "ๆฅๆฌ่ช" โ ุงููุตูุต ุชุธูุฑ ุจุงููุงุจุงูู
- [ ] โ ุงุฎุชุฑ "ุนุฑุจู" โ ุงููุตูุต ุชุนูุฏ ุฅูู ุงูุนุฑุจูุฉ ุงูุฃุตููุฉ
- [ ] โ ุงููุฑ ุนูู "ุงุจุญุซ ุนู ุงูุฃุตูุงู" ูุงูุชุจ ุจุฃู ูุบุฉ (ูุซู "pasta") โ ูุธูุฑ ุงูุตูู ุงููุทุงุจู

### ุงูุฃุฏุงุก ูุงูุฃูุงู
- [ ] โ ุฅุถุงูุฉ ุตูู ูุง ุชุฃุฎุฐ ููุชุงู ุทูููุงู (< 2 ุซุงููุฉ)
- [ ] โ ุชุนุฏูู ูุง ูุฒูู ุงูุจูุงูุงุช ุงููุฏููุฉ (backfill ูุญูุธูุง)
- [ ] โ ุญููู ุบูุฑ ูุชููุนุฉ ูุง ูููู ุฅุฏุฑุงุฌูุง (whitelist ูุญุธุฑูุง)
- [ ] โ ุงูุชุฑุฌูุงุช ุชุญูุธ ุจุดูู ุขูู ูู Supabase

---

## ๐ฆ ุงููููุงุช ุงููุนุฏูุฉ

| ุงูููู | ุงูููุน | ููุฎุต ุงูุชุบููุฑ |
|------|------|-----------|
| `app/dashboard/page.js` | UI | ุฅุถุงูุฉ 5 ุญููู ุงุณู + 5 ููุงุทู ูุตู |
| `app/menu/[id]/page.js` | UI | ุงุฎุชูุงุฑ ุชุฑุฌูุฉ + ุจุญุซ ูุชุนุฏุฏ ุงููุบุงุช |
| `app/api/admin/menu-item/route.js` | API | ุชุตููุฉ/ุชูุธูู ุญููู + whitelist |
| `package.json` | Config | ุฅุถุงูุฉ `pg@^8.11.0` ููุชุฑุญูู |
| `scripts/run_translation_migration.js` | Script | ุณูุฑุจุช ุชุฑุญูู ุชููุงุฆู (ุฌุฏูุฏ) |
| `migrations/001_add_translation_columns.sql` | Schema | SQL ุงูุชุฑุญูู (ููุฌูุฏ) |

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงูุฎุทุฃ: "ุญููู ูุง ุชุธูุฑ ูู Dashboard"
**ุงูุญู:** ุชุฃูุฏ ูู ุชุดุบูู ุงูุชุฑุญูู ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```bash
node scripts/run_translation_migration.js
```

### ุงูุฎุทุฃ: "ุงูุจูุงูุงุช ูุง ุชุญูุธ ุนูุฏ ุงููุชุงุจุฉ"
**ุงูุญู:** ุชุญูู ูู:
1. ูุชุบูุฑุงุช ุงูุจูุฆุฉ (`NEXT_PUBLIC_SUPABASE_URL`, `NEXT_PUBLIC_SUPABASE_ANON_KEY`)
2. ุตูุงุญูุงุช RLS ูู Supabase (Dashboard โ Authentication โ Policies)

### ุงูุฎุทุฃ: "ุงูุจุญุซ ูุง ูุฌุฏ ุงูุฃุตูุงู ุจุงูุชุฑุฌูุงุช"
**ุงูุญู:** ุชุฃูุฏ ูู:
1. ุงูุฃุนูุฏุฉ ููุฌูุฏุฉ ูู ุงูุฌุฏูู (`description_en`, etc.)
2. ุงูุจูุงูุงุช ูููุฆุฉ (backfill ูุนูู)

---

## ๐ ุงููุฑุงุฌุน

- **Supabase Docs:** https://supabase.com/docs/guides/database
- **Next.js API Routes:** https://nextjs.org/docs/app/building-your-application/routing/route-handlers
- **PostgreSQL:** https://www.postgresql.org/docs/

---

## โจ ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุงุฎุชูุงุฑูุฉ)

1. **ุชุญุณูู ุงููุงุฌูุฉ:** ุฅุถุงูุฉ ุชุจููุจุงุช ููุบุงุช ูู Dashboard ูุชุณููู ุงูุฅุฏุฎุงู
2. **ุงูุชุฑุฌูุฉ ุงูุชููุงุฆูุฉ:** ุฏูุฌ Google Translate API ูููุก ุงูุญููู ุชููุงุฆูุงู
3. **ุงูุชุฑุงุฌุน ุนู ุงูุชุฑุญูู:** ุฅูุดุงุก ุณูุฑุจุช downgrade (ุฅุฒุงูุฉ ุงูุฃุนูุฏุฉ)
4. **ุงููุฑุงูุจุฉ:** ุชุณุฌูู ูุญุงููุงุช ุฅุฏุฑุงุฌ ุจูุงูุงุช ุบูุฑ ุตุงูุญุฉ

---

**ุชู ุงูุงูุชูุงุก ุจูุฌุงุญ! โ**
