# ๐ ุฏููู ุงูุฃูุงู ุงูุดุงูู - MenuFlow

## ๐ ุฌุฏูู ุงููุญุชููุงุช
1. [ุฃูุงู ุงููุตุงุฏูุฉ](#ุฃูุงู-ุงููุตุงุฏูุฉ)
2. [ุฃูุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช](#ุฃูุงู-ูุงุนุฏุฉ-ุงูุจูุงูุงุช)
3. [ุฃูุงู ุงูุจูุงูุงุช](#ุฃูุงู-ุงูุจูุงูุงุช)
4. [ุฃูุงู ุงูููู](#ุฃูุงู-ุงูููู)
5. [ูุงุฆูุฉ ุงูุชุญูู ูู ุงูุฃูุงู](#ูุงุฆูุฉ-ุงูุชุญูู)

---

## ุฃูุงู ุงููุตุงุฏูุฉ

### โ ูุง ุชู ุชุทุจููู:
- โ ุงูุชุญูู ูู ุตุญุฉ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- โ ูุฑุถ ูููุงุช ูุฑูุฑ ูููุฉ (8+ ุฃุญุฑูุ ุญุฑูู ูุจูุฑุฉ ูุตุบูุฑุฉุ ุฃุฑูุงู)
- โ ูุนุฏู ุงูุชุญูู ูู ุงูุทูุจุงุช (Rate Limiting) - 5 ูุญุงููุงุช ูู ุงูุฏูููุฉ
- โ ุชูุธูู ุงููุฏุฎูุงุช ูู XSS
- โ ุงุณุชุฎุฏุงู Supabase Auth ุงูููุซูู

### ๐ ุฎุทูุงุช ุฅุถุงููุฉ ููุตู ุจูุง:

#### 1. ุชูุนูู ุชุฃููุฏ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:
```javascript
// ูู Supabase Dashboard โ Authentication โ Providers
// ูุนูู "Confirm email" ุชุญุช Email
```

#### 2. ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ:
```javascript
// ูู Supabase Dashboard โ Authentication โ Email Templates
// ุชุฃูุฏ ูู ูุงูุจ "Reset Password" ููุนูู
```

#### 3. ุฅุถุงูุฉ 2FA (ูุตุงุฏูุฉ ุซูุงุฆูุฉ):
```javascript
// ุงุฎุชูุงุฑู ููู ููุตู ุจู
const { data, error } = await supabase.auth.mfa.enroll({
  factorType: 'totp'
})
```

---

## ุฃูุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### โ ูุง ุชู ุชุทุจููู:
- โ Row Level Security (RLS) - ุงูุณุฎ ุงูุณูุงุณุงุช ูู `lib/RLS_POLICIES.md`
- โ User ownership verification
- โ Input validation

### ๐จ ูุฌุจ ุชุทุจููู ููุฑุงู:

#### ุฎุทูุฉ 1: ุงูุณุฎ ููุงููู RLS ุฅูู Supabase SQL Editor

```bash
1. ุงุฐูุจ ุฅูู: https://app.supabase.com
2. ุงุฎุชุฑ ูุดุฑูุนู
3. ุงูุณุฎ ุฌููุน ุงูุณูุงุณุงุช ูู lib/RLS_POLICIES.md
4. ุฃูุตููุง ูู SQL Editor ูุชูููุฐูุง
```

#### ุฎุทูุฉ 2: ูุนูู RLS ุนูู ุฌููุน ุงูุฌุฏุงูู:
```sql
ALTER TABLE restaurants ENABLE ROW LEVEL SECURITY;
ALTER TABLE menu_items ENABLE ROW LEVEL SECURITY;
ALTER TABLE menu_addons ENABLE ROW LEVEL SECURITY;
ALTER TABLE orders ENABLE ROW LEVEL SECURITY;
ALTER TABLE order_items ENABLE ROW LEVEL SECURITY;
```

#### ุฎุทูุฉ 3: ุชุญูู ูู ุงูุณูุงุณุงุช:
```bash
1. ุงูุชุญ Supabase Dashboard
2. ุงุฎุชุฑ "Authentication" โ "Policies"
3. ุชุญูู ูู ุฃู ูู ุฌุฏูู ูู ุณูุงุณุงุช RLS
```

---

## ุฃูุงู ุงูุจูุงูุงุช

### โ ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ ุงููุญููุฉ:
- ๐ ูููุงุช ุงููุฑูุฑ: ูุญููุธุฉ ููุท ูู Supabase Auth (ูุดูุฑุฉ)
- ๐ ุจูุงูุงุช ุงูุฏูุน: ูุง ุชูุญูุธ ูุญููุงูุ ูุนุงูุฌุชูุง ุนุจุฑ InstaPay API
- ๐ ูุนูููุงุช ุงูุนููุงุก: ูุญููุฉ ุจู RLS

### โ๏ธ ูุง ูุง ูุฌุจ ูุนูู ุฃุจุฏุงู:
```javascript
// โ ูุง ุชุญูุธ ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ ูู localStorage
localStorage.setItem('password', userPassword) // ุฎุทุฑ!

// โ ูุง ุชุณุชุฎุฏู Service Role Key ูู ุงููุชุตูุญ
const client = createClient(url, serviceRoleKey) // ุฎุทุฑ!

// โ ูุง ุชุทุจุน ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ ูู console
console.log(sensitiveData) // ุฎุทุฑ!
```

### โ ุงูุจูุงูุงุช ุงููุณููุญ ุญูุธูุง ูุญููุงู:
```javascript
// ุงูุจูุงูุงุช ุบูุฑ ุงูุญุณุงุณุฉ ููุท:
- siteLanguage: ุงููุบุฉ ุงููุฎุชุงุฑุฉ
- dashboardTheme: ูุถุน ูุธูู ุฃู ูุงุชุญ
- savedCustomerInfo: ุงุณู ููุงุชู ุงูุนููู
```

---

## ุฃูุงู ุงูููู

### โ HTTPS ู SSL:
```
โ ุชุฃูุฏ ูู ุฃู ูููุนู ูุณุชุฎุฏู HTTPS ููุท
โ Vercel ููุฑุถ HTTPS ุงูุชุฑุงุถูุงู
โ ุงุณุชุฎุฏู redirect ูู HTTP ุฅูู HTTPS
```

### โ CORS (Cross-Origin Resource Sharing):
```javascript
// ูู next.config.ts
const config = {
  headers: [
    {
      key: 'Access-Control-Allow-Origin',
      value: process.env.NEXT_PUBLIC_SITE_URL || '*'
    }
  ]
}
```

### โ Content Security Policy:
```javascript
// ููุถู ุฅุถุงูุฉ ูู next.config.ts
const securityHeaders = [
  {
    key: 'Content-Security-Policy',
    value: "default-src 'self'; script-src 'self' 'unsafe-inline'"
  }
]
```

---

## ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุงูุขููุฉ

### โ ุฅุนุฏุงุฏ .env.local:
```bash
# .env.local (ูุง ุชุฑูุนูุง ุนูู GitHub)
NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJxx...

# ูุง ุชุถุน ุงูููุงุชูุญ ุงูุญุณุงุณุฉ ูู NEXT_PUBLIC_
SERVICE_ROLE_KEY=xxxxx (server-only)
```

### โ .gitignore:
```bash
# ุชุฃูุฏ ูู ุฃู .env.local ูู .gitignore
.env.local
.env.*.local
```

### โ GitHub Secrets (ููู CI/CD):
```bash
1. ุงุฐูุจ ุฅูู Settings โ Secrets and variables โ Actions
2. ุฃุถู ุงูููุงุชูุญ ุงูุญุณุงุณุฉ ูู secrets
3. ุงุณุชุฎุฏููุง ูู workflows
```

---

## ูุงุฆูุฉ ุงูุชุญูู

### ุงููุตุงุฏูุฉ:
- [ ] ุชูุนูู ุชุฃููุฏ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- [ ] ูุฑุถ ูููุงุช ูุฑูุฑ ูููุฉ
- [ ] ุชูุนูู ูุนุฏู ุงูุชุญูู ูู ุงูุทูุจุงุช
- [ ] ุงุฎุชุจุงุฑ ุชุณุฌูู ุงูุฏุฎูู ูุงูุชุณุฌูู

### ูุงุนุฏุฉ ุงูุจูุงูุงุช:
- [ ] ุชุทุจูู ุฌููุน ุณูุงุณุงุช RLS
- [ ] ูุนูู RLS ุนูู ุฌููุน ุงูุฌุฏุงูู
- [ ] ุงุฎุชุจุฑ ุฃู ุงููุณุชุฎุฏู ูุง ูุฑู ุจูุงูุงุช ุงูุขุฎุฑูู
- [ ] ุชุญูู ูู ุตูุงุญูุงุช ุงููุตูู

### ุงูุจูุงูุงุช:
- [ ] ูุง ุชุญูุธ ุจูุงูุงุช ุญุณุงุณุฉ ูุญููุงู
- [ ] ุชูุธูู ุงููุฏุฎูุงุช ูู XSS
- [ ] ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
- [ ] ุชุณุฌูู ุงูุฃุญุฏุงุซ ุงูุฃูููุฉ

### ุงูููู:
- [ ] ุงุณุชุฎุฏุงู HTTPS ููุท
- [ ] ูุญุต ุฑุคูุณ ุงูุฃูุงู
- [ ] ุงุฎุชุจุฑ CORS
- [ ] CSP ููุนูู

### ุงูุจูุฆุฉ:
- [ ] .env.local ูู .gitignore
- [ ] ุงูููุงุชูุญ ุงูุญุณุงุณุฉ ูู GitHub Secrets
- [ ] ูุง ุชูุฌุฏ ููุงุชูุญ ูู ุงูููุฏ
- [ ] ุงูุชูุซูู ูุญุฏุซ

---

## ุงูุงุฎุชุจุงุฑ ุงูุฃููู

### ุงุฎุชุจุฑ ุตูุงุญูุงุช RLS:
```javascript
// ุชุณุฌูู ุฏุฎูู ููุณุชุฎุฏู A
// ุงูุชุญ Developer Tools
// ุงูุชุจ:
await supabase
  .from('restaurants')
  .select('*')
  .eq('user_id', 'user-b-id')
  // ูุฌุจ ุฃู ูุฑุฌุน ุณุฌูุงุช ูุงุฑุบุฉ (ูุง ุชุฑู ุจูุงูุงุช B)
```

### ุงุฎุชุจุฑ ูุนุฏู ุงูุทูุจุงุช:
```javascript
// ุญุงูู ุฅุฑุณุงู 6 ุทูุจุงุช ุชุณุฌูู ุฏุฎูู ูู ุฏูููุฉ ูุงุญุฏุฉ
// ูุฌุจ ุฃู ุชูุดู ุงูู 6 ูุญุงููุฉ
```

### ุงุฎุชุจุฑ ุชูุธูู ุงููุฏุฎูุงุช:
```javascript
// ุฌุฑุจ ุฅุฏุฎุงู: <script>alert('XSS')</script>
// ูุง ูุฌุจ ุฃู ูุชู ุชูููุฐ ุงูุณูุฑูุจุช
```

---

## ููุชูุงุตู ูุงูุฏุนู ุงูุฃููู

- ๐ง ุงูุฅุจูุงุบ ุนู ุซุบุฑุงุช: security@menuflow.com
- ๐ ุตูุญุฉ ุงูุฃูุงู: https://menuflow.com/security
- ๐ ุงููุณุชูุฏุงุช: https://supabase.com/docs/guides/auth

---

## ุชุญุฏูุซุงุช ุงูุฃูุงู

ุชุญุฏูุซ: **ูุจุฑุงูุฑ 2026**
- โ ุชุทุจูู ุงูุชุญูู ูู ุตุญุฉ ุงููุฏุฎูุงุช
- โ ูุนุฏู ุงูุชุญูู ูู ุงูุทูุจุงุช
- โ ุฏููู RLS ุณูุงุณุงุช
- โ ุฅุฑุดุงุฏุงุช ูุชุบูุฑุงุช ุงูุจูุฆุฉ

**ุขุฎุฑ ูุญุต ุฃููู:** ูู ูุชู ุจุนุฏ (ูููุตุญ ุจู ูู 3 ุฃุดูุฑ)
